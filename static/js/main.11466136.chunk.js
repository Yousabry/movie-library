(this["webpackJsonpmovie-library"]=this["webpackJsonpmovie-library"]||[]).push([[0],{173:function(e,t,o){},174:function(e,t,o){},291:function(e,t,o){},292:function(e,t,o){},307:function(e,t,o){"use strict";o.r(t);var n=o(10),r=o(0),s=o.n(r),i=o(35),a=o.n(i),c=(o(173),o(60)),l=o(61),h=o(68),u=o(67),d=o(311),m=o(312),b=o(315),j=o(49),v=o(162),g=o(113),f=o(314),p=o(316),O=o(313),S=o(318),x=(o(174),f.a.Search),y=function(e){Object(h.a)(o,e);var t=Object(u.a)(o);function o(e){var r;return Object(c.a)(this,o),(r=t.call(this,e)).getColumns=function(){var e=r.props.shortList.map((function(e){return e.imdbID}));return[{title:"Title",dataIndex:"Title",key:"Title"},{title:"Year",dataIndex:"Year",key:"Year"},{title:"",key:"action",render:function(t,o){return Object(n.jsxs)(p.b,{size:"middle",children:[Object(n.jsx)(j.a,{type:"link",size:"middle",disabled:e.includes(o.imdbID),onClick:function(){return r.props.onSelectMovie(o)},children:"Add movie"}),Object(n.jsx)(j.a,{shape:"circle",icon:Object(n.jsx)(S.a,{}),size:"small",href:o.Poster,target:"__blank"})]})}}]},r.loadMore=function(){r.setState({searchLoading:!0});var e=r.state.moviesMatchingQuery.length/10+1,t="http://www.omdbapi.com/?apikey=79fbe843&type=movie&s=".concat(r.state.searchVal,"&page=").concat(e);fetch(t).then((function(e){return e.json()})).then((function(t){if("False"===t.Response){var o;console.error(t),r.setState({isError:!0,errorMsg:null!==(o=t.Error)&&void 0!==o?o:"Something went wrong",searchLoading:!1,canLoadMore:!1})}else{var n;console.log(t);var s=[].concat(Object(g.a)(r.state.moviesMatchingQuery),Object(g.a)(t.Search));r.setState({isError:!1,moviesMatchingQuery:s,searchLoading:!1,canLoadMore:parseInt(null!==(n=t.totalResults)&&void 0!==n?n:"0")/10>e})}}),(function(e){var t;console.error(e),r.setState({isError:!0,errorMsg:null!==(t=e.Error)&&void 0!==t?t:"Something went wrong",searchLoading:!1,canLoadMore:!1})}))},r.onSearch=function(e){if(""!==e){r.setState({searchLoading:!0,searchVal:e});var t="http://www.omdbapi.com/?apikey=79fbe843&type=movie&s=".concat(e);fetch(t).then((function(e){return e.json()})).then((function(e){var t,o;"False"===e.Response?(console.error(e),r.setState({isError:!0,errorMsg:null!==(t=e.Error)&&void 0!==t?t:"Something went wrong",searchLoading:!1,canLoadMore:!1})):(console.log(e),r.setState({isError:!1,moviesMatchingQuery:e.Search,searchLoading:!1,canLoadMore:parseInt(null!==(o=e.totalResults)&&void 0!==o?o:"0")>10}))}),(function(e){var t;console.error(e),r.setState({isError:!0,errorMsg:null!==(t=e.Error)&&void 0!==t?t:"Something went wrong",searchLoading:!1,canLoadMore:!1})}))}},r.state={moviesMatchingQuery:[],isError:!1,errorMsg:"",searchLoading:!1,canLoadMore:!1,searchVal:""},r}return Object(l.a)(o,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"search-container",children:[Object(n.jsx)(x,{placeholder:"search for a movie",autoFocus:!0,allowClear:!0,enterButton:"Search",size:"large",loading:this.state.searchLoading,onSearch:this.onSearch}),!this.state.isError&&this.state.moviesMatchingQuery.length>0&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(O.a,{columns:this.getColumns(),dataSource:this.state.moviesMatchingQuery,pagination:!1,scroll:{y:500},rowKey:function(e){return e.imdbID}}),this.state.canLoadMore&&Object(n.jsx)(j.a,{onClick:this.loadMore,children:"Load more"})]}),this.state.isError&&Object(n.jsx)("h3",{children:this.state.errorMsg})]})}}]),o}(s.a.Component),M=o(317),L=o(319),w=(o(291),function(e){Object(h.a)(o,e);var t=Object(u.a)(o);function o(){return Object(c.a)(this,o),t.apply(this,arguments)}return Object(l.a)(o,[{key:"render",value:function(){var e=this,t=this.props.shortList.length;return Object(n.jsxs)("div",{className:"shortlist-container",children:[Object(n.jsx)("h2",{style:{width:"100%",textAlign:"center"},children:"Your nominations"}),Object(n.jsx)("p",{style:{width:"100%",textAlign:"center",fontSize:"0.9em"},children:"(select up to 5 movies to nominate)"}),Object(n.jsx)(M.b,{itemLayout:"horizontal",bordered:!0,dataSource:this.props.shortList,renderItem:function(t){return Object(n.jsx)(M.b.Item,{actions:[Object(n.jsx)(L.a,{color:"#eb2f96",onClick:function(){return e.props.onRemoveMovie(t.imdbID)}})],children:Object(n.jsx)(M.b.Item.Meta,{title:"".concat(t.Title," (").concat(t.Year,")")})})}}),Object(n.jsx)(j.a,{color:"blue",onClick:this.props.onSubmit,disabled:t>5||0===t,type:"primary",children:"Submit nominations"}),t>5&&Object(n.jsx)("p",{className:"error-msg",children:"You cannot select more than 5 movies to nominate"})]})}}]),o}(s.a.Component)),k=(o(292),function(e){Object(h.a)(o,e);var t=Object(u.a)(o);function o(e){var n,r;return Object(c.a)(this,o),(r=t.call(this,e)).cookies=void 0,r.saveShortlist=function(e){r.setState({shortlist:e}),r.cookies.set("movies-shortlist",JSON.stringify(e),{path:"/"})},r.onSelectMovie=function(e){if(-1===r.state.shortlist.map((function(e){return e.imdbID})).indexOf(e.imdbID)){var t=r.state.shortlist;t.push(e),r.saveShortlist(t)}},r.onRemoveMovie=function(e){var t=r.state.shortlist.findIndex((function(t){return t.imdbID===e}));if(-1!==t){var o=r.state.shortlist;o.splice(t,1),r.saveShortlist(o)}},r.cookies=new v.a,r.state={shortlist:null!==(n=r.cookies.get("movies-shortlist"))&&void 0!==n?n:[]},r}return Object(l.a)(o,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"Page-container",children:[Object(n.jsx)("h1",{className:"Page-title",children:"Youssef's Movie Library"}),Object(n.jsxs)(d.a,{children:[Object(n.jsx)(m.a,{span:12,children:Object(n.jsx)(y,{onSelectMovie:this.onSelectMovie,shortList:this.state.shortlist})}),Object(n.jsx)(m.a,{span:12,children:Object(n.jsx)(w,{onRemoveMovie:this.onRemoveMovie,shortList:this.state.shortlist,onSubmit:function(){e.saveShortlist([]),alert("nominations submitted!")}})})]}),5===this.state.shortlist.length&&Object(n.jsx)(b.a,{message:"You have 5 movies in your list. Ready to nominate them?",type:"success",showIcon:!0,action:Object(n.jsx)(j.a,{size:"small",type:"text",onClick:function(){e.saveShortlist([]),alert("nominations submitted!")},children:"Nominate!"})})]})}}]),o}(s.a.Component)),I=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,320)).then((function(t){var o=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;o(e),n(e),r(e),s(e),i(e)}))};a.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.getElementById("root")),I()}},[[307,1,2]]]);
//# sourceMappingURL=main.11466136.chunk.js.map